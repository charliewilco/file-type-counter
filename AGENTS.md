# Repository Guidelines

## Project Structure & Module Organization
- `src/` holds the Rust CLI (`main.rs`) and library logic (`lib.rs`).
- `labels.json` at the repo root maps extensions to display labels.
- `fixture/` provides sample files used in tests and manual checks.
- `legacy/` contains the original TypeScript/Bun implementation and its tests.
- `target/` is generated by Cargo builds.

## Build, Test, and Development Commands
- `cargo build --release` builds the Rust CLI to `target/release/extension-count`.
- `cargo run -- ./src` runs the CLI against a path for quick checks.
- `cargo test` runs Rust unit tests in `src/`.
- `cd legacy && bun install` installs dependencies for the legacy CLI.
- `cd legacy && bun test` runs the legacy TypeScript tests.

## Coding Style & Naming Conventions
- Rust: 4-space indentation, rustfmt defaults, `snake_case` for functions/vars, `CamelCase` for types.
- Prefer explicit, small helpers (see `display_files`, `sort_rows`) and keep CLI parsing in `main.rs`.
- JSON labels use lowercase extension keys without dots (e.g., `"rs": "Rust"`).

## Testing Guidelines
- Rust tests live alongside code in `src/main.rs` and `src/lib.rs` using `#[test]`.
- Use `fixture/` for file-based assertions; prefer `tempfile` for isolated cases.
- Legacy tests are in `legacy/index.test.ts` and run via Bun.

## Commit & Pull Request Guidelines
- Commit messages are short, imperative, and sentence case (e.g., “Fix directory paths…”).
- Keep PRs focused; include a brief summary and test coverage notes.
- If touching output formatting or labels, include before/after CLI examples.

## Security & Configuration Tips
- `labels.json` is loaded from the current working directory; avoid untrusted labels files.
- CLI accepts paths directly, so validate test fixtures and inputs when adding new cases.
